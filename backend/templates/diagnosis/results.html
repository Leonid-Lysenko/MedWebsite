{% extends 'diagnosis/base.html' %}
{% load static %}

{% block title %}–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ - –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –ø–æ–º–æ—â–Ω–∏–∫{% endblock %}

{% block extra_css %}
<style>
    /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
    body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    .medical-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π */
    .disease-card {
        transition: all 0.3s ease;
        border-left: 5px solid #007bff;
        border-radius: 15px;
    }
    
    .disease-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        border-left-color: #0056b3;
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ */
    .probability-indicator {
        padding: 20px;
        border-radius: 12px;
        background: linear-gradient(135deg, #f8f9fa, #e9ecef);
        text-align: center;
    }
    
    .emoji-indicator {
        font-size: 2.5rem;
        margin-bottom: 10px;
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
    .btn-medical {
        background: linear-gradient(45deg, #667eea, #764ba2);
        border: none;
        border-radius: 50px;
        padding: 12px 30px;
        font-weight: 600;
        transition: all 0.3s ease;
    }
    
    .btn-medical:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }
</style>
{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ -->
            <div class="medical-card p-4 p-md-5 mb-4">
                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
                <div class="text-center mb-5">
                    <h1 class="display-5 fw-bold text-primary mb-3">
                        <i class="fas fa-chart-line me-3"></i>
                        –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ —Å–∏–º–ø—Ç–æ–º–æ–≤
                    </h1>
                    <div class="badge bg-primary text-white fs-6 px-3 py-2">
                        <i class="fas fa-stethoscope me-2"></i>
                        –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ {{ symptoms_count }} —Å–∏–º–ø—Ç–æ–º–æ–≤
                    </div>
                </div>

                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å —Å –¥–µ—Ç–∞–ª—è–º–∏ –∞–Ω–∞–ª–∏–∑–∞ -->
                <div class="alert alert-info mb-4">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <strong><i class="fas fa-info-circle me-2"></i>–î–µ—Ç–∞–ª–∏ –∞–Ω–∞–ª–∏–∑–∞:</strong>
                            <div class="mt-1">
                                <small>
                                    <strong>–°–∏–º–ø—Ç–æ–º—ã:</strong> {{ selected_symptoms|join:", " }}
                                </small>
                            </div>
                        </div>
                        <div class="col-md-6 text-md-end">
                            <small class="text-muted">
                                <i class="fas fa-clock me-1"></i>
                                –ê–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω: {% now "j E Y H:i" %}
                            </small>
                        </div>
                    </div>
                </div>

                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–ø–∏—Å–∫–∞ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π -->
                <h3 class="text-center mb-4 text-primary">
                    <i class="fas fa-disease me-2"></i>
                    –ù–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω—ã–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è:
                </h3>

                <!-- –°–µ—Ç–∫–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ -->
                <div class="row justify-content-center">
                    <div class="col-12">
                        <div class="row g-4 justify-content-center">
                            {% for result in results %}
                                <div class="col-12 col-lg-10 col-xl-8">
                                    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è -->
                                    <a href="{% url 'disease_detail' result.disease %}"
                                       class="text-decoration-none">
                                        <div class="disease-card card mb-4 shadow-sm">
                                            <div class="card-body p-3 p-md-4">
                                                <div class="row align-items-center">
                                                    <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–∏ -->
                                                    <div class="col-12 col-md-8 text-center text-md-start">
                                                        <h4 class="card-title text-primary mb-2">
                                                            <i class="fas fa-file-medical me-2"></i>
                                                            {{ result.disease }}
                                                        </h4>
                                                        <p class="card-text text-muted mb-3">
                                                            <small>{{ result.description }}</small>
                                                        </p>
                                                        <div class="d-flex flex-column flex-md-row align-items-center align-items-md-start flex-wrap">
                                                            <span class="badge bg-success me-0 me-md-2 mb-2">
                                                                <i class="fas fa-heartbeat me-1"></i>
                                                                –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                                                            </span>
                                                            <small class="text-success text-center text-md-start">
                                                                {{ result.treatment }}
                                                            </small>
                                                        </div>
                                                    </div>
                                                    
                                                    <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ -->
                                                    <div class="col-12 col-md-4 text-center mt-3 mt-md-0">
                                                        <div class="probability-indicator">
                                                            <!-- –≠–º–æ–¥–∑–∏-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ -->
                                                            <div class="emoji-indicator">
                                                                {% if result.probability > 0.1 %}
                                                                    üî•
                                                                {% elif result.probability > 0.05 %}
                                                                    ‚ö†Ô∏è
                                                                {% else %}
                                                                    üí°
                                                                {% endif %}
                                                            </div>
                                                            <!-- –¢–µ–∫—Å—Ç–æ–≤—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ -->
                                                            <span class="probability-badge 
                                                                {% if result.probability > 0.1 %}bg-success
                                                                {% elif result.probability > 0.05 %}bg-warning text-dark
                                                                {% else %}bg-info text-dark{% endif %}">
                                                                {% if result.probability > 0.1 %}
                                                                    –í—ã—Å–æ–∫–∞—è
                                                                {% elif result.probability > 0.05 %}
                                                                    –°—Ä–µ–¥–Ω—è—è
                                                                {% else %}
                                                                    –ù–∏–∑–∫–∞—è
                                                                {% endif %}
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <!-- –ë–ª–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ -->
                <div class="row mt-5">
                    <div class="col-md-6 mb-3">
                        <!-- –ö–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ —Ñ–æ—Ä–º–µ –≤–≤–æ–¥–∞ —Å–∏–º–ø—Ç–æ–º–æ–≤ -->
                        <a href="{% url 'home' %}" class="btn btn-outline-primary w-100 py-3">
                            <i class="fas fa-arrow-left me-2"></i>
                            –í–µ—Ä–Ω—É—Ç—å—Å—è –∏ –∏–∑–º–µ–Ω–∏—Ç—å —Å–∏–º–ø—Ç–æ–º—ã
                        </a>
                    </div>
                    <div class="col-md-6 mb-3">
                        <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–ø–µ—á–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
                        <button class="btn btn-medical text-white w-100 py-3"
                                onclick="window.print()">
                            <i class="fas fa-print me-2"></i>
                            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                        </button>
                    </div>
                </div>
            </div>

            <!-- –í–∞–∂–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
            <div class="alert alert-danger text-center">
                <h5>
                    <i class="fas fa-exclamation-triangle me-2"></i>–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
                </h5>
                <div class="row">
                    <div class="col-md-4">
                        <i class="fas fa-user-md me-2"></i>
                        <strong>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –≤—Ä–∞—á–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞</strong>
                    </div>
                    <div class="col-md-4">
                        <i class="fas fa-clock me-2"></i>
                        <strong>–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –¥–∏–∞–≥–Ω–æ–∑</strong>
                    </div>
                    <div class="col-md-4">
                        <i class="fas fa-phone me-2"></i>
                        <strong>–≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ: 112, 103</strong>
                    </div>
                </div>
                <p class="mt-3 mb-0">
                    –î–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–º–æ—â–Ω–∏–∫–æ–º –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.
                    –î–ª—è —Ç–æ—á–Ω–æ–≥–æ –¥–∏–∞–≥–Ω–æ–∑–∞ –∏ –ª–µ—á–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤—Ä–∞—á—É!
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}