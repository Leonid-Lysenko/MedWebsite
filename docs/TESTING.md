# Документация тестирования

## Обзор системы тестирования

Система тестирования реализована с использованием многоуровневого подхода, охватывающего unit-тесты, интеграционные тесты и end-to-end тестирование. Общее покрытие кода составляет 97%.

## Структура тестов

### Unit-тесты
- **Назначение**: Проверка отдельных компонентов системы в изоляции
- **Расположение**: `diagnosis/tests/test_units/`
- **Количество тестов**: 97

**Основные тестовые модули:**
- `test_views_units.py` - тестирование бизнес-логики
- `test_disease_data_units.py` - тестирование работы с медицинскими данными  
- `test_urls_units.py` - тестирование маршрутизации

### Интеграционные тесты
- **Назначение**: Проверка взаимодействия между компонентами системы
- **Расположение**: `diagnosis/tests/test_integration/`
- **Количество тестов**: 36

**Основные тестовые модули:**
- `test_diagnosis_flow.py` - тестирование полного цикла диагностики
- `test_knowledge_base.py` - тестирование функциональности базы знаний
- `test_navigation.py` - тестирование навигационных сценариев
- `test_error_handling.py` - тестирование обработки ошибок

### End-to-End тесты
- **Назначение**: Тестирование системы в условиях, близких к реальной эксплуатации
- **Расположение**: `diagnosis/tests/test_e2e/`
- **Количество тестов**: 3
- **Технология**: Selenium WebDriver с Chrome в headless-режиме

## Запуск тестов (с покрытием кода)

### Запуск всех тестов
```bash
cd backend
pytest
```

### Запуск тестов по категориям
```bash
# Только unit-тесты
pytest -m unit -v

# Только интеграционные тесты
pytest -m integration -v

# Только E2E тесты
pytest -m e2e -v
```

### Проверка качества кода

```bash
black --check .
isort --check-only .
flake8 .
```

## Ключевые тестовые сценарии

### Unit-тестирование

   - Корректность загрузки симптомов из файла
   - Валидация структуры данных заболеваний
   - Обработка неизвестных заболеваний
   - Форматирование результатов диагностики

### Интеграционное тестирование

   - Полный цикл диагностики: симптомы → ML-модель → результаты
   - Навигация между разделами приложения
   - Работа с базой знаний и поиск заболеваний
   - Обработка некорректных входных данных

### E2E тестирование

   - Реальные пользовательские сценарии в браузере
   - Взаимодействие с интерфейсом выбора симптомов
   - Навигация по базе знаний заболеваний
   - Проверка отображения результатов диагностики

## Интеграция с CI

### Тестирование интегрировано в GitHub Actions pipeline:

   - Автоматический запуск при каждом коммите
   - Проверка качества кода (Black, isort, flake8)
   - Запуск полного набора тестов
   - Генерация отчетов о покрытии

## Метрики качества

### Покрытие кода: 97%

### Процент успешных тестов: 100%

### Время выполнения полного набора тестов: не более 2 минут